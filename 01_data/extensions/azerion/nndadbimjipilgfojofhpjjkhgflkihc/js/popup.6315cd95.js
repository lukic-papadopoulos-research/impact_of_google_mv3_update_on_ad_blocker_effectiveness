(function(e){function t(t){for(var s,a,r=t[0],l=t[1],d=t[2],u=0,m=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&m.push(i[a][0]),i[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,d||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],s=!0,r=1;r<o.length;r++){var l=o[r];0!==i[l]&&(s=!1)}s&&(n.splice(t--,1),e=a(a.s=o[0]))}return e}var s={},i={popup:0},n=[];function a(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=s,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(o,s,function(t){return e[t]}.bind(null,s));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("0a3d")},"0a3d":function(e,t,o){"use strict";o.r(t);var s=o("2b0e"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-main",[o("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return o("v-tab",{key:t.tab},[e._v(e._s(t.tab))])})),1),o("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(e){return o("v-tab-item",{key:e.tab},["Bids"===e.tab?o("bids"):o("cmp-status")],1)})),1)],1)],1)},n=[],a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ma-3"},[o("div",{staticClass:"d-flex flex-column"},[o("v-checkbox",{staticClass:"mt-0 mb-0",attrs:{label:"Show all bidders"},on:{click:e.showBiddersWithNoBidsClick},model:{value:e.showBiddersWithNoBids,callback:function(t){e.showBiddersWithNoBids=t},expression:"showBiddersWithNoBids"}}),e._l(e.bidTables,(function(t){return o("v-card",{key:t.frameChromeId,staticClass:"mb-5 elevation-10 d-flex flex-column"},["top"===t.frame?o("v-card-title",{staticClass:"text-subtitle-1 pb-0"},[e._v("Top Frame")]):e._e(),"top"!==t.frame?o("v-card-title",{staticClass:"text-subtitle-1 pb-0"},[e._v(e._s(t.frame))]):e._e(),o("v-data-table",{ref:"bidTable",refInFor:!0,staticClass:"d-flex ma-1 pa-1",attrs:{dense:"",id:"bidTable","group-by":"slot",items:t.items,headers:e.columns,"show-expand":"","item-key":"id","hide-default-footer":!0,"disable-pagination":""},scopedSlots:e._u([{key:"group.header",fn:function(s){var i=s.group,n=s.headers,a=s.toggle,r=s.isOpen;return[o("td",{staticClass:"px-0",attrs:{colspan:n.length}},[o("span",{staticClass:"text-no-wrap"},[o("v-btn",{ref:i,refInFor:!0,attrs:{"x-medium":"",icon:""},on:{click:a}},[o("v-icon",r?[e._v("mdi-chevron-down")]:[e._v("mdi-chevron-right")])],1),o("span",{staticClass:"mx-0 px-0 font-weight-bold"},[o("a",{on:{click:function(o){return e.slotIdClick({slotId:i,table:t})}}},[e._v(e._s(i))])]),e.slotIdToAdUnitPath[i]&&i!==e.slotIdToAdUnitPath[i]?o("span",{staticClass:"mx-2 px-3 font-weight-normal"},[e._v(e._s(e.slotIdToAdUnitPath[i]))]):e._e()],1)])]}},{key:"expanded-item",fn:function(t){var s=t.headers,i=t.item;return[i.rawBid?o("td",{attrs:{colspan:s.length}},[o("v-textarea",{staticClass:"text-body-2 ma-0 pa-0",attrs:{dense:"",outlined:"",name:"cs",readonly:"","hide-details":"",rows:"10"},model:{value:i.rawBid,callback:function(t){e.$set(i,"rawBid",t)},expression:"item.rawBid"}})],1):e._e()]}}],null,!0)})],1)}))],2)])},r=[],l=o("8415"),d=l["a"],c=(o("b031"),o("2877")),u=o("6544"),m=o.n(u),h=o("8336"),p=o("b0af"),g=o("99d9"),f=o("ac7c"),b=o("8fea"),v=o("132d"),w=o("a844"),x=Object(c["a"])(d,a,r,!1,null,null,null),S=x.exports;m()(x,{VBtn:h["a"],VCard:p["a"],VCardTitle:g["a"],VCheckbox:f["a"],VDataTable:b["a"],VIcon:v["a"],VTextarea:w["a"]});var y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-card",{staticClass:"text-body-2 elevation-5 mx-3 mt-7 mb-3 pa-1"},[e._l(e.messagesToShow,(function(t){return o("v-text-field",{key:t.txt,staticClass:"text-body-2 mt-2 mx-3",attrs:{solo:"",dense:"",value:t.txt,readonly:"","hide-details":""},scopedSlots:e._u([{key:"prepend-inner",fn:function(){return[o("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])]},proxy:!0},{key:"append",fn:function(){return[t.url?o("v-btn",{attrs:{icon:"",href:t.url,target:"_blank"}},[o("v-icon",{attrs:{small:""}},[e._v("mdi-open-in-new")])],1):e._e(),t.info?o("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[o("v-icon",e._g({attrs:{small:""}},s),[e._v("mdi-information-outline")])]}}],null,!0)},[o("span",[e._v(e._s(t.info))])]):e._e()]},proxy:!0}],null,!0)})})),e.consentString?o("v-textarea",{staticClass:"text-body-2 mt-3 py-3 mx-3",attrs:{rows:"6",dense:"",outlined:"",name:"cs",label:"Consent String",readonly:""},model:{value:e.consentString,callback:function(t){e.consentString=t},expression:"consentString"}}):e._e()],2)],1)},C=[];const T=253,_=755,I={v2Found:{txt:"TCF v2 CMP detected.",color:"success",icon:"mdi-check"},v2Error:{txt:"TCF v2 error.",color:"red",icon:"mdi-alert-outline"},v2Timeout:{txt:"TCF v2 API is not responding.",color:"red",icon:"mdi-alert-outline"},v2FrameApiNotFound:{txt:"TCF v2 iframe API not found. Tags inside iframes won't receive the consent information.",color:"warning",icon:"mdi-alert-outline"},v2UiShown:{txt:"CMP UI shown. Submit your consent choices to see more information.",color:"primary",icon:"mdi-information-outline"},cmpnf:{txt:"IAB TCF CMP not found or unable to check the status.",color:"primary",icon:"mdi-information-outline"},v1Found:{txt:"TCF v1 CMP detected. Please migrate to v2.",color:"red",icon:"mdi-alert-outline"},googleLimitedAds:{txt:"Google has permission to serve limited ads.",color:"primary",icon:"mdi-check",url:"https://support.google.com/admanager/answer/9882911?hl=en"},googleNpa:{txt:"Google has permission to serve non-personalized ads.",color:"primary",icon:"mdi-check",url:"https://support.google.com/admanager/answer/9805023?hl=en"},googlePA:{txt:"Google has permission to serve personalized ads.",color:"success",icon:"mdi-check",url:"https://support.google.com/admanager/answer/9805023?hl=en"},googleNotFound:{txt:"Google not on the vendor list.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleGlobConsent:{txt:"Google requires a service-specific TC string. Fix in CMP.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoLegInt2:{txt:"Google requires legitimate interest for purpose 2.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoLegInt7:{txt:"Google requires legitimate interest for purpose 7.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoLegInt9:{txt:"Google requires legitimate interest for purpose 9.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoLegInt10:{txt:"Google requires legitimate interest for purpose 10.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoCons2:{txt:"Google requires consent for purpose 2.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoCons7:{txt:"Google requires consent for purpose 7.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoCons9:{txt:"Google requires consent for purpose 9.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoCons10:{txt:"Google requires consent for purpose 10.",color:"red",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleNoPerms:{txt:"Google has no or insufficient permissions. No ads will be served.",color:"warning",icon:"mdi-alert-outline",info:"Google Ad Manager will not serve ads from header bidding bidders."},googleReqHasCS:{txt:"Google ad request contains consent string.",color:"success",icon:"mdi-check"},googleReqNoCS:{txt:"Google ad request was sent without a consent string.",color:"warning",icon:"mdi-alert-outline"},idCanServe:{txt:"Improve Digital has permission to serve ads.",color:"success",icon:"mdi-check"},idNoPerms:{txt:"Improve Digital has insufficient permissions to serve.",color:"warning",icon:"mdi-alert-outline"},idBasicAdsPerms:{txt:"Improve Digital has permission to serve basic ads.",color:"primary",icon:"mdi-check"},idNotFound:{txt:"Improve Digital not on the vendor list.",color:"warning",icon:"mdi-alert-outline"},idNoVendorPerms:{txt:"Improve Digital does not have consent.",color:"warning",icon:"mdi-alert-outline"},idReqHasCS:{txt:"Improve Digital ad request contains consent string.",color:"success",icon:"mdi-check"},idReqNoCS:{txt:"Improve Digital ad request was sent without a consent string.",color:"warning",icon:"mdi-alert-outline"}},k=[I.cmpnf];let B="";var D={data(){return{messagesToShow:k,consentString:B}},methods:{showCmpStatus(e){if(!1!==e.success)if(e.success&&e.gdprApplies){if(1==e.version)return void(this.messagesToShow=[I.v1Found]);if(2==e.version){if(this.messagesToShow=[I.v2Found],e.tcfIframeExists||this.messagesToShow.push(I.v2FrameApiNotFound),e.isDialogShown)return void this.messagesToShow.push(I.v2UiShown);const t=e.consentData.purpose.consents,o=e.consentData.purpose.legitimateInterests,s=e.consentData.vendor.consents,i=e.consentData.vendor.legitimateInterests,n=s[T]||i[T];if(n){const e=n&&t[1]&&(t[2]||o[2]);e?this.messagesToShow.push(I.idCanServe):this.messagesToShow.push(I.idBasicAdsPerms)}else"undefined"===typeof n&&this.messagesToShow.push(I.idNotFound),"undefined"!==typeof e.adRequests.improve&&this.messagesToShow.push(I.idBasicAdsPerms);if(!0===e.adRequests.improve?this.messagesToShow.push(I.idReqHasCS):!1===e.adRequests.improve&&this.messagesToShow.push(I.idReqNoCS),s[_]||i[_])if(!1===e.consentData.isServiceSpecific)this.messagesToShow.push(I.googleGlobConsent);else{const s=e.consentData.publisher.restrictions||{};let i=!0;for(let e of[2,7,9,10])s[e]&&1===s[e][_]?t[e]||(this.messagesToShow.push(I["googleNoCons"+e]),i=!1):o[e]||(this.messagesToShow.push(I["googleNoLegInt"+e]),i=!1);i&&(t[1]?t[3]&&t[4]?this.messagesToShow.push(I.googlePA):this.messagesToShow.push(I.googleNpa):this.messagesToShow.push(I.googleLimitedAds))}else this.messagesToShow.push(I.googleNotFound);!0===e.adRequests.google?this.messagesToShow.push(I.googleReqHasCS):!1===e.adRequests.google&&this.messagesToShow.push(I.googleReqNoCS),this.consentString=e.consentData.consentString}}else;else e.timeout&&2==e.version?this.messagesToShow=[I.v2Timeout]:this.messagesToShow=[I.v2Error]}},mounted(){chrome.runtime.onMessage.addListener((e,t)=>{if(e.type&&"idhbex_cs"==e.type){const t=e.data;chrome.runtime.sendMessage({type:"idhbex_r_cmp_adrequest"},e=>{t.adRequests=e,this.showCmpStatus(t)})}}),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{type:"idhbex_r_cs"})}))}},N=D,A=o("8654"),P=o("3a2f"),q=Object(c["a"])(N,y,C,!1,null,"6bfde343",null),G=q.exports;m()(q,{VBtn:h["a"],VCard:p["a"],VIcon:v["a"],VTextField:A["a"],VTextarea:w["a"],VTooltip:P["a"]});var M={name:"App",components:{Bids:S,CmpStatus:G},data(){return{tab:null,items:[{tab:"Bids"},{tab:"GDPR"}]}}},F=M,V=(o("5df5"),o("7496")),R=o("f6c4"),O=o("71a3"),j=o("c671"),E=o("fe57"),L=o("aac8"),U=Object(c["a"])(F,i,n,!1,null,null,null),W=U.exports;m()(U,{VApp:V["a"],VMain:R["a"],VTab:O["a"],VTabItem:j["a"],VTabs:E["a"],VTabsItems:L["a"]});o("41e6");var H=o("f309");s["a"].use(H["a"]);var z=new H["a"]({});new s["a"]({el:"#app",vuetify:z,render:e=>e(W)}),(window.screenLeft<0||window.screenTop<0||window.screenLeft>window.screen.width||window.screenTop>window.screen.height)&&chrome.runtime.getPlatformInfo((function(e){if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n              @keyframes redraw {\n                0% {\n                  opacity: 1;\n                }\n                100% {\n                  opacity: .99;\n                }\n              }\n            "),e.insertRule("\n              html {\n                animation: redraw 1s linear infinite;\n              }\n            "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))},4091:function(e,t,o){},"5df5":function(e,t,o){"use strict";var s=o("7c00"),i=o.n(s);i.a},"7c00":function(e,t,o){},8415:function(e,t,o){"use strict";(function(e){t["a"]={name:"Bids",data(){return{showBiddersWithNoBids:!1,bidTables:[],columns:[{value:"slot",text:"Slot"},{value:"bidder",text:"Bidder"},{value:"size",text:"Size"},{value:"format",text:"Format"},{value:"cpm",text:"CPM"},{value:"response",text:"Response (ms)",width:50},{value:"winner",text:"Winner"},{value:"data-table-expand",text:""}],slotIdToAdUnitPath:{},tabData:null}},methods:{showBiddersWithNoBidsClick(){this.updateData(null)},slotIdClick(e){const t={type:"IDHBEX Highlight Element"};if("top"===e.table.frame)t.eleId=e.slotId;else if(e.table.frameId)t.eleId=e.table.frameId;else{if(!e.table.frameSrc)return;t.frameSrc=e.table.frameSrc}chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,t)}))},updateData(e){const t=this.showBiddersWithNoBids;if(!this.tabData&&(!e||!e.frames||0===e.frames.length))return;e&&(this.tabData=e),this.bidTables=[];const o=Object.keys(this.tabData.frames);let s=1;o.sort().forEach(e=>{if(!this.tabData.frames[e].slots||0===Object.keys(this.tabData.frames[e].slots).length)return;const o={frameChromeId:e,frame:this.tabData.frames[e].frameHost,items:[],frameSrc:this.tabData.frames[e].frameSrc,frameId:this.tabData.frames[e].frameId},i=o.items;this.bidTables.push(o),Object.keys(this.tabData.frames[e].slots).sort().forEach(o=>{const n=this.tabData.frames[e].slots[o].bids;let a=!0;a&&(a=!1,this.slotIdToAdUnitPath[o]=this.tabData.frames[e].slots[o].gamAdUnitPath||"");const r=t?n.length:n.filter(e=>!e.noBid).length;0===r?i.push({id:s++,slot:o,bidder:"no bids in the last auction",size:"",format:"",cpm:"",response:"",winner:"",frame:e}):n.forEach(n=>{let a=o;if(n.noBid)t&&i.push({id:s++,slot:a,bidder:n.bidderCode,size:"no bid",format:"",cpm:"",response:"",winner:"",rawBid:n.rawBid,frame:e});else{let t=n.bidderCode;t+=n.dealId?" (deal)":"",t+=n.isCachedBid?" (cached bid)":"",i.push({id:s++,slot:a,bidder:t,size:n.size,format:n.mediaType,cpm:isNaN(n.cpm)||""==n.cpm?"":n.cpm,response:n.timeToRespond,winner:!0===n.winner?"yes":n.winner||"",rawBid:n.rawBid,frame:e})}})})})}},mounted(){e.runtime.sendMessage({}),chrome.runtime.onMessage.addListener((e,t)=>{e.type&&"IDHBEX Update View"==e.type&&this.updateData(e.tabData)}),chrome.runtime.sendMessage({type:"IDHBEX Request Data"},this.updateData)},computed:{defaultText(){return e.i18n.getMessage("extName")}}}}).call(this,o("9845"))},b031:function(e,t,o){"use strict";var s=o("4091"),i=o.n(s);i.a}});