"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[478],{3466:(e,t,i)=>{i.d(t,{X:()=>G});var n=i(2791),r=i(3239);i(4881);const o="unlimited",s="$rc_annual",a="$rc_lifetime";const l=e=>{var t,i,n;const r={price:null===e||void 0===e||null===(t=e.webBillingProduct)||void 0===t?void 0:t.currentPrice.formattedPrice,package:e};switch(e.identifier){case"$rc_monthly":Object.assign(r,{title:"onboarding.subscriptions.monthly.cell.title",description:"onboarding.subscriptions.trial.description",confirmationButtonTitleKey:"onboarding.subscriptions.start_trial.title",type:"monthly"});break;case s:Object.assign(r,{title:"onboarding.subscriptions.annual.cell.title",description:"onboarding.subscriptions.trial.description",confirmationButtonTitleKey:"onboarding.subscriptions.start_trial.title",type:"annual"});const t=e.webBillingProduct.defaultSubscriptionOption,o=null===t||void 0===t||null===(i=t.base)||void 0===i||null===(n=i.pricePerMonth)||void 0===n?void 0:n.formattedPrice;o&&(r.additionalPrice=o);break;case a:Object.assign(r,{title:"onboarding.subscriptions.lifetime.cell.title",description:"onboarding.subscriptions.lifetime.message",confirmationButtonTitleKey:"onboarding.subscriptions.lifetime.button_title",type:"lifetime"});break;default:return null}return r};var c=i(1689),d=i(890),p=i(533),u=i(6934),g=i(9793);var x=i(1413),h=i(184);const f=(0,u.ZP)(c.Z)((function(){let{sx:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,x.Z)({paddingLeft:24,paddingRight:24,width:"100%",textAlign:"center"},e)})),b=e=>{let{titleKey:t,sx:i}=e;const{t:n}=(0,g.$)();return(0,h.jsx)(f,{sx:i,children:(0,h.jsx)(d.Z,{variant:"h4",children:n(t)})})};var m=i(5987);const y=["id","sx","values"],v=e=>{let{id:t,sx:i,values:n}=e,r=(0,m.Z)(e,y);const{t:o}=(0,g.$)();return(0,h.jsx)(d.Z,(0,x.Z)((0,x.Z)({sx:i},r),{},{children:o(t,n)}))};var j=i(5527),Z=i(1496);const k=(0,u.ZP)(j.Z)((e=>{let{theme:t,isSelected:i}=e;return{padding:"11px 25px",borderRadius:"30px",minHeight:"80px",minWidth:"350px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease-in-out",border:"2px solid ".concat(i?t.palette.primary.main:t.palette.text.primary),backgroundColor:i?t.palette.background.default:t.palette.secondary.main,"&:hover":{boxShadow:t.shadows[2]}}})),w=(0,u.ZP)(c.Z)({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:6,width:"100%"}),S=(0,u.ZP)(c.Z)({display:"flex",flexDirection:"row",justifyContent:"space-between"}),P=(0,u.ZP)(d.Z)((e=>{let{theme:t}=e;return{fontSize:(0,Z.Q)(24),fontWeight:600,color:t.palette.text.primary}})),C=(0,u.ZP)(d.Z)((e=>{let{theme:t}=e;return{fontSize:(0,Z.Q)(17),fontWeight:600,color:t.palette.text.primary}})),_=(0,u.ZP)(d.Z)((e=>{let{theme:t}=e;return{fontSize:(0,Z.Q)(17),fontWeight:400,color:t.palette.text.primary}})),O=(0,u.ZP)(d.Z)((e=>{let{theme:t}=e;return{fontSize:(0,Z.Q)(14),color:t.palette.text.primary,fontWeight:400}})),A=(0,u.ZP)(c.Z)({display:"flex",flexDirection:"row",gap:3}),T=(0,u.ZP)(c.Z)((e=>{let{theme:t,isSelected:i}=e;return{borderRadius:"11px",border:"3px solid ".concat(t.palette.text.primary),backgroundColor:i?t.palette.secondary.main:t.palette.text.secondary,padding:"1px 4px"}})),W=e=>{let{identifier:t,isSelected:i}=e;const{t:n}=(0,g.$)();return t===s?(0,h.jsxs)(T,{isSelected:i,children:[n("onboarding.subscriptions.save")," 16.6%"]}):t===a?(0,h.jsx)(T,{isSelected:i,children:n("onboarding.subscriptions.best_value")}):(0,h.jsx)(h.Fragment,{children:"\xa0"})},B=e=>{let{identifier:t,title:i,price:n,description:r,additionalPrice:o,isSelected:s,onClick:a}=e;const{t:l}=(0,g.$)();return(0,h.jsx)(k,{isSelected:s,onClick:a,elevation:s?2:0,children:(0,h.jsxs)(w,{children:[(0,h.jsxs)(S,{children:[(0,h.jsx)(P,{children:l(i)}),(0,h.jsxs)(A,{children:[(0,h.jsxs)(O,{children:[o?"(".concat(o,"/month)"):"","\xa0"]}),(0,h.jsx)(C,{children:n})]})]}),(0,h.jsxs)(S,{children:[(0,h.jsx)(_,{children:l(r)}),(0,h.jsx)(W,{identifier:t,isSelected:s})]})]})})};var z=i(4294);const D=(0,u.ZP)(z.Z)((e=>{let{theme:t,buttonStyle:i}=e;const n={action:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark}},secondary:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,"&:hover":{backgroundColor:t.palette.secondary.dark}},outline:{backgroundColor:"transparent",color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main),"&:hover":{backgroundColor:t.palette.action.hover}}};return(0,x.Z)({borderRadius:10,padding:"12px 24px",fontSize:(0,Z.Q)(14),fontWeight:600,textTransform:"uppercase",width:"100%"},n[i])})),H=e=>{let{type:t,titleKey:i,onClick:n,disabled:r}=e;const{t:o}=(0,g.$)();return(0,h.jsx)(D,{buttonStyle:t,onClick:n,disabled:r,variant:"contained",children:o(i)})};H.defaultProps={type:"action",disabled:!1};const L=H;var U=i(8886),$=i(5766),K=i(4278);const R=(0,u.ZP)(c.Z)((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column"}})),I=(0,u.ZP)(c.Z)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:24,marginTop:24,marginBottom:24,flexWrap:"wrap"}),E=(0,u.ZP)(c.Z)({display:"flex",flexDirection:"column",alignItems:"center",gap:12,width:"100%",marginTop:10,marginBottom:10}),F=(0,u.ZP)(c.Z)({display:"flex",gap:12}),Q=e=>{let{onNext:t,packages:i,email:r,userId:o,customerPortalUrl:s,isEntitled:a,subscribedPackage:l,isAppStore:u,onOpenLogin:x,onOpenSignUp:f}=e;const{t:m}=(0,g.$)(),[y,j]=(0,n.useState)(l||null),Z=(0,n.useCallback)((async()=>{if(y)try{await(0,U.y)(y.package.identifier,o),t()}catch(e){}}),[t,y,o]);return(0,h.jsxs)(R,{children:[a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b,{titleKey:"options.menu.manage_subscriptions",sx:{paddingBottom:"10px"}}),(0,h.jsx)(c.Z,{px:3,children:s&&(0,h.jsxs)(d.Z,{sx:{color:"text.primary",fontSize:14,fontWeight:500,lineHeight:1.5,textAlign:"center",paddingX:3,width:"100%"},children:[m("onboarding.subscriptions.subscribed.manage_subscription")," ",(0,h.jsx)(p.Z,{href:s,target:"_blank",rel:"noopener noreferrer",children:m("onboarding.subscriptions.subscribed.customer_portal")})]})})]}):null,(0,h.jsxs)(c.Z,{display:"flex",flexDirection:"column",children:[!a&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b,{titleKey:"onboarding.subscriptions.section.title",sx:{paddingBottom:"17px"}}),(0,h.jsx)(v,{id:"onboarding.subscriptions.section.subtitle",sx:{color:"text.primary",fontSize:14,fontWeight:500,lineHeight:1.5,textAlign:"center",width:"100%",whiteSpace:"pre-wrap"}})]}),u?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),(0,h.jsx)(v,{id:"onboarding.subscriptions.appstore.subscribed_message",sx:{color:"text.primary",fontSize:14,fontWeight:500,lineHeight:1.5,textAlign:"center",paddingX:3,width:"100%"}}),(0,h.jsxs)(d.Z,{sx:{color:"text.primary",fontSize:14,fontWeight:500,lineHeight:1.5,textAlign:"center",paddingX:3,width:"100%"},children:[m("onboarding.subscriptions.appstore.please")," ",(0,h.jsx)(p.Z,{href:"https://support.apple.com/HT202039",target:"_blank",rel:"noopener noreferrer",children:m("onboarding.subscriptions.appstore.visit_link")})," ",m("onboarding.subscriptions.appstore.for_more_details")]})]}):(0,h.jsx)(I,{children:i.map((e=>(0,h.jsx)(B,{identifier:e.package.identifier,title:e.title,price:e.price,description:e.description,additionalPrice:e.additionalPrice,isSelected:e===y,onClick:()=>{a||j(e)}},e.package.identifier)))}),(0,h.jsxs)(c.Z,{px:4,mb:1,marginTop:"20px",children:[y&&!a&&o&&r&&(0,h.jsx)(L,{type:"action",titleKey:"onboarding.subscriptions.checkout.title",onClick:Z}),!r&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{sx:{color:"text.primary",fontSize:14,fontWeight:500,lineHeight:1.5,textAlign:"center",paddingX:3,width:"100%"},children:m("onboarding.login.description")}),(0,h.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"8px"},children:[(0,h.jsx)(z.Z,{component:$.P,color:"primary",variant:"contained",onClick:x,href:K.T.login,children:m("popup.limited_functionality.button.signin")}),(0,h.jsx)(z.Z,{component:$.P,color:"primary",variant:"contained",onClick:f,href:K.T.signUp,children:m("popup.limited_functionality.button.signup")})]})]}),(0,h.jsx)(E,{children:(0,h.jsxs)(F,{children:[(0,h.jsx)(p.Z,{href:"https://www.super-agent.com/eula",variant:"body2",target:"_blank",rel:"noopener noreferrer",children:m("onboarding.login.proceeding_consent.eula")}),(0,h.jsx)(p.Z,{href:"https://www.super-agent.com/privacy-policy",variant:"body2",target:"_blank",rel:"noopener noreferrer",children:m("onboarding.login.proceeding_consent.privacy_policy")})]})})]})]})]})},X=e=>{var t,i,n,r,s,a;let{packages:l,user:c,customer:d,onSubscribed:p,onOpenLogin:u,onOpenSignUp:g}=e;const x=null===d||void 0===d||null===(t=d.entitlements)||void 0===t||null===(i=t.active)||void 0===i||null===(n=i[o])||void 0===n?void 0:n.productIdentifier,f=l.find((e=>{var t;return(null===(t=e.package.webBillingProduct)||void 0===t?void 0:t.identifier)===x})),b=null===d||void 0===d||null===(r=d.entitlements)||void 0===r||null===(s=r.active)||void 0===s||null===(a=s[o])||void 0===a?void 0:a.store;return(0,h.jsx)(Q,{onNext:p,packages:l,email:null===c||void 0===c?void 0:c.email,userId:null===c||void 0===c?void 0:c.sub,isEntitled:!!x,customerPortalUrl:null===d||void 0===d?void 0:d.managementURL,subscribedPackage:f,isAppStore:"app_store"===b||"mac_app_store"===b,onOpenLogin:u,onOpenSignUp:g})};var q=i(7930),V=i(4880);const G=e=>{let{onOpenLogin:t,onOpenSignUp:i}=e;const[o,s]=(0,n.useState)(!0),[a,c]=(0,n.useState)([]),[d,p]=(0,n.useState)(null),[u,g]=(0,n.useState)(null),x=(0,n.useCallback)((async()=>{try{const e=(await new q.cf(q.Vm.Purchases.GetCustomerInfo).sendRequest()).message.payload.customer;g(e)}catch(e){}}),[]),f=(0,n.useCallback)((async()=>{try{const{user:e}=(await new q.cf(q.Vm.Auth.CheckAuth,{}).sendRequest()).message.payload;p(e)}catch(e){}}),[]);(0,n.useEffect)((()=>{const e=()=>{x(),f()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[x,f]);const b=(0,n.useCallback)((()=>x()),[x]);(0,n.useEffect)((()=>{const e=async()=>{try{var e;const t=(await new q.cf(q.Vm.Purchases.GetOfferings).sendRequest()).message.payload.offerings,i=null===t||void 0===t?void 0:t.current;c((null!==(e=null===i||void 0===i?void 0:i.availablePackages)&&void 0!==e?e:[]).map(l).filter(Boolean))}catch(t){}};Promise.all([f(),x(),e()]).finally((()=>{s(!1)}))}),[x,f]);const m=(0,V.k6)(),y=(0,n.useCallback)((()=>{m.push("/account")}),[m]),v=(0,n.useCallback)((()=>{m.push("/account/signup")}),[m]);return o?(0,h.jsx)(r.Z,{color:"inherit"}):(0,h.jsx)(X,{packages:a,user:d,customer:u,onSubscribed:b,onOpenLogin:null!==t&&void 0!==t?t:y,onOpenSignUp:null!==i&&void 0!==i?i:v})}},5766:(e,t,i)=>{i.d(t,{P:()=>d});var n=i(1413),r=i(5987),o=i(533),s=i(3973),a=i(2791),l=i(184);const c=["noSafariChildren","safariHref","safariOnClick"],d=e=>{let{noSafariChildren:t,safariHref:i,safariOnClick:d}=e,p=(0,r.Z)(e,c);const u=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),d&&d();const t=i||p.href;t&&(window.location.href=t)}),[p.href,i,d]);return s.Z.isAnySafari(navigator.userAgent)?(0,l.jsx)(o.Z,(0,n.Z)((0,n.Z)({},p),{},{href:i||p.href,onClick:u})):(0,l.jsx)("noSafariChildren",(0,n.Z)({},p))}}}]);